@import "tailwindcss";
@import "./palette.css";
@import "./theme.css";
@import "./legacy.css";
@import "./code-block/syntax.css";
@import "./code-block/syntax-example-theme.css";

/* Note: Color modifier plugin (@stagewise/tailwindcss-color-modifiers) should be
   loaded in the app's main CSS file, not here, for proper module resolution.
   Usage: bg-primary-500/[l+10] (lightness +0.1), text-base-300/[c+0.02] (chroma) */

@theme default {
  /* Light mode elevation shadows (very subtle) */
  --shadow-elev-1:
    0 1px 2px color-mix(in oklch, var(--color-base-950) 8%, transparent),
    0 1px 1px color-mix(in oklch, var(--color-base-950) 6%, transparent);

  --shadow-elev-2:
    0 8px 24px color-mix(in oklch, var(--color-base-950) 14%, transparent),
    0 2px 6px color-mix(in oklch, var(--color-base-950) 10%, transparent);

  --animate-progress-bar-indicator: progress-bar-indicator 500ms linear infinite;
  @keyframes progress-bar-indicator {
    0% {
      transform: translateX(-50px);
    }
    100% {
      transform: translateX(0px);
    }
  }

  --animate-skeleton-shimmer: skeleton-shimmer 2s ease-in-out infinite;
  @keyframes skeleton-shimmer {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }
}

/* Dark mode elevation shadows (create depth) */
@media (prefers-color-scheme: dark) {
  :root {
     --shadow-elev-1:
      0 1px 2px color-mix(in oklch, var(--color-base-950) 40%, transparent),
      0 10px 28px color-mix(in oklch, var(--color-base-950) 32%, transparent);
    

    --shadow-elev-2:
      0 2px 0 color-mix(in oklch, var(--color-base-950) 60%, transparent),
      0 22px 60px color-mix(in oklch, var(--color-base-950) 45%, transparent);
  }
}

/* Make all shapes inside a .seti-icon SVG use the parent text color */
.seti-icon svg * {
  fill: currentColor;
}

@utility shadow-elevation-1 {
  @apply shadow-(--shadow-elev-1);
}

@utility shadow-elevation-2 {
  @apply shadow-(--shadow-elev-2);
}

@utility surface-sheen {
  @apply relative
    before:absolute before:inset-0 before:block before:size-full
    before:pointer-events-none before:rounded-[inherit]
    before:bg-[linear-gradient(to_bottom,color-mix(in_oklch,var(--color-base-100)_4%,transparent),transparent_35%,color-mix(in_oklch,var(--color-base-950)_3%,transparent))]
    before:mix-blend-normal;
}

/* Auto-derived border utilities
   These derive border colors from the element's background color (--cm-bg-color)
   which is automatically set by bg-* utilities via the color-modifiers plugin.
   Falls back to semantic border colors when no background is set. */

:root {
  --hover-text-derived-l: -0.09;
  --hover-text-derived-c: -0.01;

  --text-derived-lighter-subtle-l: 0.06;
  --text-derived-lighter-subtle-c: 0.011;

  --text-derived-lighter-l: 0.09;
  --text-derived-lighter-c: 0.014;

  --active-text-derived-l: -0.011;
  --active-text-derived-c: -0.001;

  --hover-derived-l: -0.01;
  --hover-derived-c: -0.001;

  --active-derived-l: -0.02;
  --active-derived-c: -0.002;

  --border-derived-l: -0.098;
  --border-derived-c: -0.014;

  --border-derived-subtle-l: -0.055;
  --border-derived-subtle-c: -0.009;

  --border-derived-subtler-l: -0.031;
  --border-derived-subtler-c: -0.005;
}

@media (prefers-color-scheme: dark) {
  :root {
    --hover-text-derived-l: 0.09;
    --hover-text-derived-c: 0.01;

    --active-text-derived-l: 0.007;
    --active-text-derived-c: 0.001;

    --hover-derived-l: 0.031;
    --hover-derived-c: 0.001;

    --active-derived-l: 0.007;
    --active-derived-c: 0.001;

    --border-derived-l: 0.07;
    --border-derived-c: 0.012;

    --border-derived-subtle-l: 0.055;
    --border-derived-subtle-c: 0.011;

    --border-derived-subtler-l: 0.031;
    --border-derived-subtler-c: 0.005;
  }
}

/* Used for subtle borders via 'border border-derived-subtle' */
@utility border-derived-subtle {
  border-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + var(--border-derived-subtle-l)) calc(c + var(--border-derived-subtle-c)) h);
}

/* Used for regular borders via 'border border-derived' */
@utility border-derived {
  border-color: oklch(from var(--cm-bg-color, var(--color-border)) calc(l + var(--border-derived-l)) calc(c + var(--border-derived-c)) h);
}

/* Used for subtler borders via 'border border-derived-subtler' */
@utility border-derived-subtler {
  border-color: oklch(from var(--cm-bg-color, var(--color-border)) calc(l + var(--border-derived-subtler-l)) calc(c + var(--border-derived-subtler-c)) h);
}

/* Used for subtle rings via 'ring ring-derived-subtle' */
@utility ring-derived-subtle {
  --tw-ring-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + var(--border-derived-subtle-l)) calc(c + var(--border-derived-subtle-c)) h);
}

/* Used for regular rings via 'ring ring-derived' */
@utility ring-derived {
  --tw-ring-color: oklch(from var(--cm-bg-color, var(--color-border)) calc(l + var(--border-derived-l)) calc(c + var(--border-derived-c)) h);
}

@utility text-hover-derived {
  color: oklch(from var(--cm-text-color, var(--color-foreground)) calc(l + var(--hover-text-derived-l)) calc(c + var(--hover-text-derived-c)) h);
}

@utility text-active-derived {
  color: oklch(from var(--cm-text-color, var(--color-foreground)) calc(l + var(--active-text-derived-l)) calc(c + var(--active-text-derived-c)) h);
}

/* Used for hover states via 'hover:bg-hover-derived' */
@utility bg-hover-derived {
  background-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + var(--hover-derived-l)) calc(c + var(--hover-derived-c)) h);
}

/* Used for active states via 'active:bg-active-derived' */
@utility bg-active-derived {
  background-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + var(--active-derived-l)) calc(c + var(--active-derived-c)) h);
}

/* Can freely be used to create lighter or darker borders, rings, backgrounds or text colors */
@utility border-derived-lighter-subtle {
  border-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + 0.06) calc(c + 0.011) h);
}
@utility border-derived-lighter {
  border-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + 0.09) calc(c + 0.014) h);
}
@utility ring-derived-lighter-subtle {
  --tw-ring-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + 0.06) calc(c + 0.011) h);
}
@utility ring-derived-lighter {
  --tw-ring-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + 0.09) calc(c + 0.014) h);
}
@utility bg-derived-lighter-subtle {
  background-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + 0.06) calc(c + 0.011) h);
}
@utility bg-derived-lighter {
  background-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l + 0.09) calc(c + 0.014) h);
}
@utility bg-derived-darker-subtle {
  background-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l - 0.06) calc(c - 0.011) h);
}
@utility bg-derived-darker {
  background-color: oklch(from var(--cm-bg-color, var(--color-border-subtle)) calc(l - 0.09) calc(c - 0.014) h);
}

@utility text-derived-lighter-subtle {
  color: oklch(from var(--cm-text-color, var(--color-foreground)) calc(l + var(--text-derived-lighter-subtle-l)) calc(c + var(--text-derived-lighter-subtle-c)) h);
}

@utility text-derived-lighter {
  color: oklch(from var(--cm-text-color, var(--color-foreground)) calc(l + var(--text-derived-lighter-l)) calc(c + var(--text-derived-lighter-c)) h);
}